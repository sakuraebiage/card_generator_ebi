<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>フォントテスト</title>
  <style>
    canvas {
      border: 1px solid #ccc;
    }

    /* ===== フォント読み込み ===== */
    @font-face {
      font-family: 'AnHina02';
      src: url('fonts/AnHina02.otf') format('opentype');
    }
    @font-face {
      font-family: 'MSMincho';
      src: url('fonts/MSMINCHO.TTC') format('truetype-collection');
    }
    @font-face {
      font-family: 'YorutegakiBold';
      src: url('fonts/YorutegakiBold.otf') format('opentype');
    }
    @font-face {
      font-family: 'YorutegakiLight';
      src: url('fonts/YorutegakiLight.otf') format('opentype');
    }
    @font-face {
      font-family: 'YorutegakiRegular';
      src: url('fonts/YorutegakiRegular.otf') format('opentype');
    }
    @font-face {
      font-family: 'AoyagiKouzanT';
      src: url('fonts/青柳衡山フォントT.ttf') format('truetype');
    }
  </style>
</head>
<body>
  <h3>フォントプレビュー</h3>

  <!-- 自己紹介 -->
  <fieldset>
    <legend>自己紹介</legend>
    <label>フォント:
      <select class="fontSelector" data-target="intro">
        <option value="AnHina02">AnHina02</option>
        <option value="MSMincho">MS Mincho</option>
        <option value="YorutegakiBold">Yorutegaki Bold</option>
        <option value="YorutegakiLight">Yorutegaki Light</option>
        <option value="YorutegakiRegular">Yorutegaki Regular</option>
        <option value="AoyagiKouzanT">青柳衡山フォント</option>
      </select>
    </label>
    <label>サイズ:
      <input type="number" class="fontSize" data-target="intro" value="36"> px
    </label>
    <br>
    <input type="text" id="introText" value="自己紹介テキスト">
  </fieldset>

  <!-- 名前 -->
  <fieldset>
    <legend>名前</legend>
    <label>フォント:
      <select class="fontSelector" data-target="name">
        <option value="AnHina02">AnHina02</option>
        <option value="MSMincho">MS Mincho</option>
        <option value="YorutegakiBold">Yorutegaki Bold</option>
        <option value="YorutegakiLight">Yorutegaki Light</option>
        <option value="YorutegakiRegular">Yorutegaki Regular</option>
        <option value="AoyagiKouzanT">青柳衡山フォント</option>
      </select>
    </label>
    <label>サイズ:
      <input type="number" class="fontSize" data-target="name" value="48"> px
    </label>
    <br>
    <input type="text" id="nameText" value="名前テキスト">
  </fieldset>

  <!-- CAST -->
  <fieldset>
    <legend>CAST</legend>
    <label>フォント:
      <select class="fontSelector" data-target="cast">
        <option value="AnHina02">AnHina02</option>
        <option value="MSMincho">MS Mincho</option>
        <option value="YorutegakiBold">Yorutegaki Bold</option>
        <option value="YorutegakiLight">Yorutegaki Light</option>
        <option value="YorutegakiRegular">Yorutegaki Regular</option>
        <option value="AoyagiKouzanT">青柳衡山フォント</option>
      </select>
    </label>
    <label>サイズ:
      <input type="number" class="fontSize" data-target="cast" value="32"> px
    </label>
    <br>
    <input type="text" id="castText" value="CASTテキスト">
  </fieldset>

  <br>
  <canvas id="canvas" width="800" height="300"></canvas>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    // デフォルト設定
    const state = {
      intro: { font: "AnHina02", size: 36, text: "自己紹介テキスト" },
      name: { font: "MSMincho", size: 48, text: "名前テキスト" },
      cast: { font: "YorutegakiRegular", size: 32, text: "CASTテキスト" }
    };

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      let y = 20;

      for (let key of ["intro", "name", "cast"]) {
        ctx.font = `${state[key].size}px "${state[key].font}"`;
        ctx.textBaseline = 'top';
        ctx.fillStyle = '#000';
        ctx.fillText(state[key].text, 20, y);
        y += state[key].size + 20;
      }
    }

    // イベント設定
    document.querySelectorAll('.fontSelector').forEach(sel => {
      sel.addEventListener('change', e => {
        const target = e.target.dataset.target;
        state[target].font = e.target.value;
        draw();
      });
    });

    document.querySelectorAll('.fontSize').forEach(input => {
      input.addEventListener('input', e => {
        const target = e.target.dataset.target;
        state[target].size = parseInt(e.target.value) || 36;
        draw();
      });
    });

    document.getElementById('introText').addEventListener('input', e => {
      state.intro.text = e.target.value;
      draw();
    });
    document.getElementById('nameText').addEventListener('input', e => {
      state.name.text = e.target.value;
      draw();
    });
    document.getElementById('castText').addEventListener('input', e => {
      state.cast.text = e.target.value;
      draw();
    });

    document.fonts.ready.then(draw);
  </script>
</body>
</html>
